# ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช - kynship

## ูุธุฑุฉ ุนุงูุฉ
ูุฐุง ุงูุฏููู ููุถุญ ููููุฉ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูุชุฎุฒูู ููููุน kynship ูุน ุถูุงู ุงูุชูุงู ุฌููุน ุงูู Policies ูุงูู Buckets ูุธูุฑ ุงูุชุนุฏููุงุช ูููุณุชุฎุฏู.

## ๐ ุงููููุงุช ุงููุทููุจุฉ

### 1. ุงููููุงุช ุงูุฃุณุงุณูุฉ
- `supabase/schema.sql` - ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฃุณุงุณู
- `supabase/storage-policies.sql` - ุฅุนุฏุงุฏุงุช ุงูุชุฎุฒูู ูุงูู Policies ุงูุฅุถุงููุฉ

## ๐ ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
1. ุงุฐูุจ ุฅูู [Supabase Dashboard](https://supabase.com/dashboard)
2. ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ ุฃู ุงุฎุชุฑ ูุดุฑูุน ููุฌูุฏ
3. ุงุฐูุจ ุฅูู **SQL Editor**
4. ุงูุณุฎ ูุญุชูู `supabase/schema.sql` ูุงูุตูู ูู ุงููุญุฑุฑ
5. ุงุถุบุท **Run** ูุชูููุฐ ุงูู schema

### ุงูุฎุทูุฉ 2: ุฅุนุฏุงุฏ ุงูุชุฎุฒูู (Storage Buckets)
1. ุงุฐูุจ ุฅูู **Storage** ูู ููุญุฉ ุงูุชุญูู
2. ุฃูุดุฆ ุงูู Buckets ุงูุชุงููุฉ:

| Bucket Name | Public | File Size Limit | Allowed MIME Types |
|-------------|--------|-----------------|-------------------|
| `products-images` | โ ุนุงู | 50MB | JPEG, PNG, WebP, GIF |
| `site-assets` | โ ุนุงู | 100MB | JPEG, PNG, WebP, GIF, SVG |
| `user-avatars` | โ ุนุงู | 10MB | JPEG, PNG, WebP |
| `intro-videos` | โ ุนุงู | 1GB | MP4, WebM, OGG |

### ุงูุฎุทูุฉ 3: ุฅุนุฏุงุฏ Storage Policies
1. ุงุฐูุจ ุฅูู **SQL Editor** ูุฑุฉ ุฃุฎุฑู
2. ุงูุณุฎ ูุญุชูู `supabase/storage-policies.sql` ูุงูุตูู ูู ุงููุญุฑุฑ
3. ุงุถุบุท **Run** ูุชูููุฐ ุงูู policies

### ุงูุฎุทูุฉ 4: ุชูุนูู Realtime
1. ุงุฐูุจ ุฅูู **Database > Replication** ูู ููุญุฉ ุงูุชุญูู
2. ูุนู **Enable realtime** ููุฌุฏุงูู ุงูุชุงููุฉ:
   - `site_settings` - ููุชุนุฏููุงุช ูู ุฅุนุฏุงุฏุงุช ุงููููุน
   - `products` - ููุชุนุฏููุงุช ูู ุงูููุชุฌุงุช
   - `orders` - ููุชุนุฏููุงุช ูู ุงูุทูุจุงุช

## ๐ ุงูุฃูุงู ูุงูู Policies

### Row Level Security (RLS)
ุชู ุชูุนูู RLS ุนูู ุฌููุน ุงูุฌุฏุงูู ูุน ุงูู Policies ุงูุชุงููุฉ:

#### `profiles` (ุงููุณุชุฎุฏููู)
- โ ุงูุฌููุน ูููููู ุฑุคูุฉ ุงููููุงุช ุงูุดุฎุตูุฉ ุงูุนุงูุฉ
- โ ุงููุณุชุฎุฏููู ูููููู ุชุนุฏูู ูููุงุชูู ุงูุดุฎุตูุฉ ููุท
- โ ุงููุฏูุฑูู ูููููู ุชุนุฏูู ุฃู ููู ุดุฎุตู

#### `site_settings` (ุฅุนุฏุงุฏุงุช ุงููููุน)
- โ ุงูุฌููุน ูููููู ุฑุคูุฉ ุงูุฅุนุฏุงุฏุงุช
- โ ุงููุฏูุฑูู ูุงููุญุฑุฑูู ููุท ูููููู ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช

#### `products` (ุงูููุชุฌุงุช)
- โ ุงูุฌููุน ูููููู ุฑุคูุฉ ุงูููุชุฌุงุช ุงููุดุทุฉ
- โ ุงููุฏูุฑูู ูุงููุญุฑุฑูู ูููููู ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช

#### `orders` (ุงูุทูุจุงุช)
- โ ุงููุณุชุฎุฏููู ูููููู ุฑุคูุฉ ุทูุจุงุชูู ููุท
- โ ุงููุฏูุฑูู ูููููู ุฑุคูุฉ ุฌููุน ุงูุทูุจุงุช
- โ ุงูุฌููุน ูููููู ุฅูุดุงุก ุทูุจุงุช

#### `reviews` (ุงูุชููููุงุช)
- โ ุงูุฌููุน ูููููู ุฑุคูุฉ ุงูุชููููุงุช ุงููุนุชูุฏุฉ
- โ ุงููุณุชุฎุฏููู ูููููู ุฅุถุงูุฉ ุชููููุงุช
- โ ุงููุฏูุฑูู ูููููู ุฅุฏุงุฑุฉ ุงูุชููููุงุช

#### `contact_messages` (ุฑุณุงุฆู ุงูุชูุงุตู)
- โ ุงูุฌููุน ูููููู ุฅุฑุณุงู ุฑุณุงุฆู
- โ ุงูุฏุนู ูุงููุฏูุฑูู ูููููู ุฅุฏุงุฑุฉ ุงูุฑุณุงุฆู

### Storage Policies
ุชู ุฅุนุฏุงุฏ Policies ููุตูุฉ ููู Bucket:

- **Products Images**: ูุฑุงุกุฉ ุนุงูุฉุ ุฑูุน ูููุณุชุฎุฏููู ุงููุณุฌูููุ ุฅุฏุงุฑุฉ ูููุฏูุฑูู
- **Site Assets**: ูุฑุงุกุฉ ุนุงูุฉุ ุฅุฏุงุฑุฉ ูููุฏูุฑูู ููุท
- **User Avatars**: ูุฑุงุกุฉ ุนุงูุฉุ ุฅุฏุงุฑุฉ ุดุฎุตูุฉ ููู ูุณุชุฎุฏู
- **Intro Videos**: ูุฑุงุกุฉ ุนุงูุฉุ ุฅุฏุงุฑุฉ ูููุฏูุฑูู ููุท

## ๐ฏ ุธููุฑ ุงูุชุนุฏููุงุช ูููุณุชุฎุฏู

### ูุธุงู Realtime ูู ุงููููุน
ุชู ุชูุนูู ูุธุงู Realtime ูู `hooks/useSiteSettings.ts`:

```typescript
// Subscribe to realtime changes
const channel = supabase
  .channel('site_settings_changes')
  .on('postgres_changes', {
    event: '*',
    schema: 'public',
    table: 'site_settings'
  }, (payload) => {
    console.log('Realtime update received:', payload)
    loadSettings() // ุฅุนุงุฏุฉ ุชุญููู ุงูุฅุนุฏุงุฏุงุช
  })
  .subscribe()
```

### ููููุฉ ุนูู ุงููุธุงู:
1. ุนูุฏูุง ูููู ุงููุฏูุฑ ุจุชุนุฏูู ุฅุนุฏุงุฏุงุช ุงููููุน ูู ููุญุฉ ุงูุชุญูู
2. ูุชู ุญูุธ ุงูุชุนุฏูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ูุชู ุฅุฑุณุงู ุฅุดุนุงุฑ Realtime ูุฌููุน ุงููุณุชุฎุฏููู ุงููุชุตููู
4. ูุชู ุฅุนุงุฏุฉ ุชุญููู ุงูุฅุนุฏุงุฏุงุช ุชููุงุฆูุงู ูู ุงููููุน
5. ุชุธูุฑ ุงูุชุนุฏููุงุช ููุฑุงู ูููุณุชุฎุฏู ุจุฏูู ุงูุญุงุฌุฉ ูุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ

### ุงุฎุชุจุงุฑ ุงููุธุงู:
1. ุงูุชุญ ุงููููุน ูู ูุชุตูุญูู ูุฎุชูููู
2. ูู ูุชุตูุญ ูุงุญุฏ: ุงุฐูุจ ุฅูู ููุญุฉ ุงูุชุญูู ููู ุจุชุนุฏูู ุฅุนุฏุงุฏุงุช ุงููููุน
3. ูู ุงููุชุตูุญ ุงูุซุงูู: ุณุชุธูุฑ ุงูุชุนุฏููุงุช ููุฑุงู ุจุฏูู ุฅุนุงุฏุฉ ุชุญููู

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: ุงูุชุนุฏููุงุช ูุง ุชุธูุฑ ูููุณุชุฎุฏู
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชูุนูู Realtime ูู Supabase Dashboard
2. ุชุฃูุฏ ูู ุฃู `NEXT_PUBLIC_SUPABASE_URL` ูุถุจูุท ุจุดูู ุตุญูุญ ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
3. ูุญุต Console ูู ุงููุชุตูุญ ููุฃุฎุทุงุก ุงููุชุนููุฉ ุจู WebSocket

### ูุดููุฉ: ูุง ูููู ุฑูุน ุงููููุงุช
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฅูุดุงุก ุงูู Buckets ูู Storage
2. ุชุฃูุฏ ูู ุชูุนูู Storage Policies
3. ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู ุตูุงุญูุงุช ููุงุณุจุฉ

### ูุดููุฉ: ูุง ูููู ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู ููุฏูุฑ ุฃู ูุญุฑุฑ
2. ุชุฃูุฏ ูู ุฃู RLS ููุนู ุนูู ุฌุฏูู `site_settings`
3. ูุญุต ุตูุงุญูุงุช ุงูู Policies ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## โ ุงูุชุญูู ูู ุงูุชูุงู ุงูุฅุนุฏุงุฏ

ุจุนุฏ ุงูุชูุงู ุฌููุน ุงูุฎุทูุงุชุ ุชุฃูุฏ ูู:

- [ ] ุชู ุชูููุฐ `schema.sql` ุจูุฌุงุญ
- [ ] ุชู ุฅูุดุงุก ุฌููุน Storage Buckets
- [ ] ุชู ุชูููุฐ `storage-policies.sql` ุจูุฌุงุญ
- [ ] ุชู ุชูุนูู Realtime ููุฌุฏุงูู ุงููุทููุจุฉ
- [ ] ูููู ูููุฏูุฑ ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช ูู ููุญุฉ ุงูุชุญูู
- [ ] ุชุธูุฑ ุงูุชุนุฏููุงุช ููุฑุงู ูููุณุชุฎุฏููู ุงูุขุฎุฑูู
- [ ] ูููู ุฑูุน ูุฅุฏุงุฑุฉ ุงููููุงุช ุจุดูู ุตุญูุญ

## ๐ ุงููุฑุงุฌุน ุงูุฅุถุงููุฉ
- [Supabase RLS Documentation](https://supabase.com/docs/guides/auth/row-level-security)
- [Supabase Storage Guide](https://supabase.com/docs/guides/storage)
- [Supabase Realtime](https://supabase.com/docs/guides/realtime)

---
**๐ ูุจุฑูู! ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูุชุฎุฒูู ููุชููุงู ูุงูุชูุงู ุฌููุน ุงูู Policies ูุงูู Realtime ูุถูุงู ุธููุฑ ุงูุชุนุฏููุงุช ูููุณุชุฎุฏู!**
